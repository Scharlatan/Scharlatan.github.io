(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;null==String.prototype.contains&&(String.prototype.contains=function(a,b){return-1!==String.prototype.indexOf.call(this,a,b)}),s=6,r=0,m=function(a,b){return a.toLowerCase().contains(b.toLowerCase())},i=function(a){return null==a?!1:"number"==typeof a?!0:!isNaN(a-0)},h=function(a){var b,c;if(b=$("#movFilter").val(),null==b||""===b.trim())return!0;if(i(b)){if(c=parseFloat(b),10>c&&a.rating>=c)return!0;if(c>1500&&a.year===c)return!0}return m(a.label,b)||m(a.originaltitle,b)||m(a.genre.join(),b)},b=function(a,b){return Array.isArray(a)&&(a=a.join(", ")),a.length-3>b?""+a.substr(0,b-3)+"...":null!=a?"":void 0},p=function(a){return a=new Date(a.substr(0,10)),""+a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear()},u=function(a){var c,d,e,f,g,i;for($("table.movies tbody").html(""),a>data.length&&(a=data.length),c=0,d=0,g=0,i=data.length;i>g;g++)if(e=data[g],d++,h(e)){if(a>0){a--;continue}f="",$(".details .id").html()===e.movieid.toString()&&(f=" sel"),c++,s>c&&$("table.movies tbody").append('<tr data-p="'+d+'" data-id="'+e.movieid+'" class="'+f+'">\n	<td>'+e.label+"</td>\n	<td>"+e.originaltitle+"</td>\n	<td>"+e.year+"</td>\n	<td>"+e.rating.toPrecision(2)+"</td>\n	<td>"+p(e.dateadded)+'</td>\n	<td class="show-for-medium-up">'+b(e.genre,25)+"</td>\n</tr>")}return $("table.movies tfoot td.amount").html(c>=s?"and "+(c-s+1)+" more...":"")},f=function(a){var b,c,d;for(c=0,d=data.length;d>c;c++)if(b=data[c],b.movieid===a)return b},e=function(a){var b,c,d,e,f;for(c="<dl class=inline-list>",f=a.cast,d=0,e=f.length;e>d;d++)b=f[d],c+="<dt>"+b.name+"</dt><dd>"+b.role+"</dd>";return c+="</dl>"},t=function(a){var b;return b=f(a),null!=b?($(".details .year").html(b.year),$(".details .title").html(b.label),$(".details .tagline").html(b.tagline),$(".details .plot").html(b.plot),$(".details .genre").html(b.genre.join(", ")),$(".details .cast").html(e(b)),$(".details .writer").html(b.writer.join(", ")),$(".details .director").html(b.director.join(", ")),$(".details .country").html(b.country),$(".details .id").html(b.movieid),$(".details .poster").attr("src",""),$(".details .poster").attr("data-original","./thumbs/"+a+".jpg"),$(".details .poster").lazyload({effect:"fadeIn",event:"load"}),$(".details .poster").trigger("load")):void 0},g=function(a,b){var c,d,e;return null==b&&(b="left"),"left"===b||$(".movies tbody tr.sel").data("p")<a?(b="right",c="left"):(b="left",c="right"),e=$(".movies tbody tr[data-p="+a+"]"),$(".movies tbody tr.sel").removeClass("sel"),e.addClass("sel"),d=e.data("id"),$(".details:visible").length<=0?($(".clickToDetail").hide(),t(d),$(".details").show("drop")):$(".details").hide("drop",{direction:c},function(){return t(d),$(".details").show("drop",{direction:b})})},a=function(a,b){var c;return null!=(c=$(b).text()<$(a).text())?c:{1:-1}},d=function(a,b){return b>a?-1:1},j=function(a,b){return d(a.label,b.label)},n=function(a,b){return d(a.originaltitle,b.originaltitle)},v=function(a,b){return d(a.year,b.year)},o=function(a,b){return d(a.rating,b.rating)},c=function(a,b){return d(a.dateadded,b.dateadded)},l="dateadded",k=!0,q=function(a){var b;switch(l===a?(b=k?"desc":"asc",k=!k):k=!1,l=a,a){case"label":data.sort(j);break;case"originaltitle":data.sort(n);break;case"year":data.sort(v);break;case"rating":data.sort(o);break;case"dateadded":data.sort(c)}return"desc"===b?data.reverse():void 0},$(function(){return $("#movFilter").on("keyup",function(){return r=0,u()}),$("span.for").click(function(){return r+=s-1,u(r)}),$("span.back").click(function(){return r-=s-1,0>r&&(r=0),u(r)}),$(".movies tbody").on("click","tr",function(){return g($(this).data("p"))}),$(".addToSelection").click(function(){var b;return $(".selectionHint").hide(),b=$(".id").html(),$(".selection li.id-"+b).length<=0?($(".selection ul").append('<li class="id-'+b+'">'+$(".title").html()+"</li>"),$(".selection ul > li").sort(a).appendTo(".selection ul")):void 0}),$("body").on("keydown",function(a){var b,c;if(39===a.keyCode||37===a.keyCode){if(null!=$(".movies tbody tr.sel").data("p")){switch(c=$(".movies tbody tr.sel").data("p"),a.keyCode){case 39:c++;break;case 37:c--}1>c&&(c=1)}else c=1;return c>$(".movies tbody tr").last().data("p")?(r+=s-1,b="left",u(r)):c<$(".movies tbody tr").first().data("p")&&(r-=s-1,b="right",u(r)),g(c,b)}}),$("table.movies th[data-sort]").click(function(a){var b;return a.preventDefault(),$("table.movies th[data-sort]").removeClass("active"),$(this).addClass("active"),b=$(this).data("sort"),q(b),r=0,u()}),u()})}).call(this);